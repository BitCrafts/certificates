# Apache reverse proxy for BitCrafts Certificates
# Place TLS cert/key in /etc/ssl/<yoursite>/ and enable the site.

<VirtualHost *:80>
    ServerName your-certs.example.com

    # Redirect HTTP to HTTPS
    Redirect permanent / https://your-certs.example.com/
</VirtualHost>

<VirtualHost *:443>
    ServerName your-certs.example.com

    SSLEngine on
    SSLCertificateFile /etc/ssl/your-certs/fullchain.pem
    SSLCertificateKeyFile /etc/ssl/your-certs/privkey.pem

    ProxyPreserveHost On
    ProxyRequests Off

    ProxyPass / http://127.0.0.1:5000/
    ProxyPassReverse / http://127.0.0.1:5000/

    # Optional: increase proxy timeout for long-running operations
    ProxyTimeout 120

    # Logging
    ErrorLog /var/log/httpd/bitcrafts_error.log
    CustomLog /var/log/httpd/bitcrafts_access.log combined

    # Security: disable TRACE
    TraceEnable off
</VirtualHost>

